<VirtualHost *:<%= @ssl_port %>>
ServerName <%= @server_name %>
DocumentRoot "<%= @web_root %>"
SetEnv MAGE_RUN_TYPE "<%= @vhost_scope %>"
SetEnv MAGE_RUN_CODE "<%= @vhost_scope_code %>"
<Directory "<%= @web_root %>">
    AllowOverride All
    Order Allow,Deny
    Allow from all
</Directory>
ErrorLog "logs/ssl_error.log"
TransferLog "logs/ssl_access.log"
LogLevel warn
SSLEngine on
SSLProtocol -all +TLSv1.1 +TLSv1.2
SSLHonorCipherOrder On
SSLCipherSuite ECDHE-RSA-AES256-GCM-SHA384:ECDHE-RSA-AES128-GCM-SHA256:DHE-RSA-AES256-GCM-SHA384:DHE-RSA-AES128-GCM-SHA256:ECDHE-RSA-AES256-SHA384:ECDHE-RSA-AES128-SHA256:ECDHE-RSA-AES256-SHA:ECDHE-RSA-AES128-SHA:DHE-RSA-AES256-SHA256:DHE-RSA-AES128-SHA256:DHE-RSA-AES256-SHA:DHE-RSA-AES128-SHA:ECDHE-RSA-DES-CBC3-SHA:EDH-RSA-DES-CBC3-SHA:AES256-GCM-SHA384:AES128-GCM-SHA256:AES256-SHA256:AES128-SHA256:AES256-SHA:AES128-SHA:DES-CBC3-SHA:HIGH:!aNULL:!eNULL:!EXPORT:!DES:!MD5:!PSK:!RC4
SSLCertificateFile "<%= @cert_directory %>/<%= @cert_file %>"
SSLCertificateKeyFile "<%= @key_directory %>/<%= @key_file %>"
SSLCertificateChainFile "<%= @chainfile_directory %>/ca-certificates.crt"
<Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars
</Files>
<Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
</Directory>
BrowserMatch "MSIE [2-5]" \
    nokeepalive ssl-unclean-shutdown \
    downgrade-1.0 force-response-1.0
CustomLog logs/ssl_request_log \
    "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost>